var e,t,n,r,l,i,o,_,c,s,a,u,d,h,f,p,g,m={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,b=Array.isArray;function k(e,t){for(var n in t)e[n]=t[n];return e}function E(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function w(e,t,n,r,l){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++c:l,__i:-1,__u:0};return null==l&&null!=_.vnode&&_.vnode(i),i}function S(e){return e.children}function C(e,t){this.props=e,this.context=t}function N(e,t){if(null==t)return e.__?N(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?N(e):null}function A(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!T.__r++||a!=_.debounceRendering)&&((a=_.debounceRendering)||u)(T)}function T(){for(var e,t,n,r,l,i,o=1;s.length;)s.length>o&&s.sort(d),e=s.shift(),o=s.length,e.__d&&(t=void 0,r=(n=e.__v).__e,l=[],i=[],e.__P&&((t=k({},n)).__v=n.__v+1,_.vnode&&_.vnode(t),H(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,l,null==r?N(n):r,!!(32&n.__u),i),t.__v=n.__v,t.__.__k[t.__i]=t,$(l,t,i),t.__e!=r&&function e(t){var n,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(t)));T.__r=0}function P(e,t,n,r,l,i,o,c,s,a,u){var d,h,f,p,g,y,k=r&&r.__k||v,C=t.length;for(s=function(e,t,n,r,l){var i,o,c,s,a,u=n.length,d=u,h=0;for(e.__k=Array(l),i=0;i<l;i++)null!=(o=t[i])&&"boolean"!=typeof o&&"function"!=typeof o?(s=i+h,(o=e.__k[i]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?w(null,o,null,null,null):b(o)?w(S,{children:o},null,null,null):null==o.constructor&&o.__b>0?w(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,c=null,-1!=(a=o.__i=function(e,t,n,r){var l,i,o=e.key,_=e.type,c=t[n];if(null===c&&null==e.key||c&&o==c.key&&_==c.type&&0==(2&c.__u))return n;if(r>+(null!=c&&0==(2&c.__u)))for(l=n-1,i=n+1;l>=0||i<t.length;){if(l>=0){if((c=t[l])&&0==(2&c.__u)&&o==c.key&&_==c.type)return l;l--}if(i<t.length){if((c=t[i])&&0==(2&c.__u)&&o==c.key&&_==c.type)return i;i++}}return -1}(o,n,s,d))&&(d--,(c=n[a])&&(c.__u|=2)),null==c||null==c.__v?(-1==a&&(l>u?h--:l<u&&h++),"function"!=typeof o.type&&(o.__u|=4)):a!=s&&(a==s-1?h--:a==s+1?h++:(a>s?h--:h++,o.__u|=4))):e.__k[i]=null;if(d)for(i=0;i<u;i++)null!=(c=n[i])&&0==(2&c.__u)&&(c.__e==r&&(r=N(c)),function e(t,n,r){var l,i;if(_.unmount&&_.unmount(t),(l=t.ref)&&(l.current&&l.current!=t.__e||F(l,null,n)),null!=(l=t.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(e){_.__e(e,n)}l.base=l.__P=null}if(l=t.__k)for(i=0;i<l.length;i++)l[i]&&e(l[i],n,r||"function"!=typeof t.type);r||E(t.__e),t.__c=t.__=t.__e=void 0}(c,c));return r}(n,t,k,s,C),d=0;d<C;d++)null!=(f=n.__k[d])&&(h=-1==f.__i?m:k[f.__i]||m,f.__i=d,y=H(e,f,h,l,i,o,c,s,a,u),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&F(h.ref,null,f),u.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),4&f.__u||h.__k===f.__k?s=function e(t,n,r){var l,i;if("function"==typeof t.type){for(l=t.__k,i=0;l&&i<l.length;i++)l[i]&&(l[i].__=t,n=e(l[i],n,r));return n}t.__e!=n&&(n&&t.type&&!r.contains(n)&&(n=N(t)),r.insertBefore(t.__e,n||null),n=t.__e);do n=n&&n.nextSibling;while(null!=n&&8==n.nodeType)return n}(f,s,e):"function"==typeof f.type&&void 0!==y?s=y:p&&(s=p.nextSibling),f.__u&=-7);return n.__e=g,s}function x(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||y.test(t)?n:n+"px"}function D(e,t,n,r,l){var i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||x(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||x(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(h,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=f,e.addEventListener(t,i?g:p,i)):e.removeEventListener(t,i?g:p,i);else{if("http://www.w3.org/2000/svg"==l)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function R(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=f++;else if(t.t<n.u)return;return n(_.event?_.event(t):t)}}}function H(e,t,n,r,l,i,c,s,a,u){var d,h,f,p,g,v,y,w,A,T,x,R,H,$,F,O,U,W=t.type;if(null!=t.constructor)return null;128&n.__u&&(a=!!(32&n.__u),i=[s=t.__e=n.__e]),(d=_.__b)&&d(t);e:if("function"==typeof W)try{if(w=t.props,A="prototype"in W&&W.prototype.render,T=(d=W.contextType)&&r[d.__c],x=d?T?T.props.value:d.__:r,n.__c?y=(h=t.__c=n.__c).__=h.__E:(A?t.__c=h=new W(w,x):(t.__c=h=new C(w,x),h.constructor=W,h.render=L),T&&T.sub(h),h.props=w,h.state||(h.state={}),h.context=x,h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),A&&null==h.__s&&(h.__s=h.state),A&&null!=W.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=k({},h.__s)),k(h.__s,W.getDerivedStateFromProps(w,h.__s))),p=h.props,g=h.state,h.__v=t,f)A&&null==W.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),A&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(A&&null==W.getDerivedStateFromProps&&w!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(w,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(w,h.__s,x)||t.__v==n.__v){for(t.__v!=n.__v&&(h.props=w,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),R=0;R<h._sb.length;R++)h.__h.push(h._sb[R]);h._sb=[],h.__h.length&&c.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(w,h.__s,x),A&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(p,g,v)})}if(h.context=x,h.props=w,h.__P=e,h.__e=!1,H=_.__r,$=0,A){for(h.state=h.__s,h.__d=!1,H&&H(t),d=h.render(h.props,h.state,h.context),F=0;F<h._sb.length;F++)h.__h.push(h._sb[F]);h._sb=[]}else do h.__d=!1,H&&H(t),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++$<25)h.state=h.__s,null!=h.getChildContext&&(r=k(k({},r),h.getChildContext())),A&&!f&&null!=h.getSnapshotBeforeUpdate&&(v=h.getSnapshotBeforeUpdate(p,g)),O=d,null!=d&&d.type===S&&null==d.key&&(O=function e(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:b(t)?t.map(e):k({},t)}(d.props.children)),s=P(e,b(O)?O:[O],t,n,r,l,i,c,s,a,u),h.base=t.__e,t.__u&=-161,h.__h.length&&c.push(h),y&&(h.__E=h.__=null)}catch(e){if(t.__v=null,a||null!=i)if(e.then){for(t.__u|=a?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,t.__e=s}else for(U=i.length;U--;)E(i[U]);else t.__e=n.__e,t.__k=n.__k;_.__e(e,t,n)}else null==i&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,r,l,i,c,s,a){var u,d,h,f,p,g,v,y=n.props,k=t.props,w=t.type;if("svg"==w?l="http://www.w3.org/2000/svg":"math"==w?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=i){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!w&&(w?p.localName==w:3==p.nodeType)){e=p,i[u]=null;break}}if(null==e){if(null==w)return document.createTextNode(k);e=document.createElementNS(l,w,k.is&&k),s&&(_.__m&&_.__m(t,i),s=!1),i=null}if(null==w)y===k||s&&e.data==k||(e.data=k);else{if(i=i&&o.call(e.childNodes),y=n.props||m,!s&&null!=i)for(y={},u=0;u<e.attributes.length;u++)y[(p=e.attributes[u]).name]=p.value;for(u in y)if(p=y[u],"children"==u);else if("dangerouslySetInnerHTML"==u)h=p;else if(!(u in k)){if("value"==u&&"defaultValue"in k||"checked"==u&&"defaultChecked"in k)continue;D(e,u,null,p,l)}for(u in k)p=k[u],"children"==u?f=p:"dangerouslySetInnerHTML"==u?d=p:"value"==u?g=p:"checked"==u?v=p:s&&"function"!=typeof p||y[u]===p||D(e,u,p,y[u],l);if(d)s||h&&(d.__html==h.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),P("template"==t.type?e.content:e,b(f)?f:[f],t,n,r,"foreignObject"==w?"http://www.w3.org/1999/xhtml":l,i,c,i?i[0]:n.__k&&N(n,0),s,a),null!=i)for(u=i.length;u--;)E(i[u]);s||(u="value","progress"==w&&null==g?e.removeAttribute("value"):null==g||g===e[u]&&("progress"!=w||g)&&("option"!=w||g==y[u])||D(e,u,g,y[u],l),u="checked",null!=v&&v!=e[u]&&D(e,u,v,y[u],l))}return e}(n.__e,t,n,r,l,i,c,a,u);return(d=_.diffed)&&d(t),128&t.__u?void 0:s}function $(e,t,n){for(var r=0;r<n.length;r++)F(n[r],n[++r],n[++r]);_.__c&&_.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){_.__e(e,t.__v)}})}function F(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){_.__e(e,n)}}function L(e,t,n){return this.constructor(e,n)}o=v.slice,_={__e:function(e,t,n,r){for(var l,i,o;t=t.__;)if((l=t.__c)&&!l.__)try{if((i=l.constructor)&&null!=i.getDerivedStateFromError&&(l.setState(i.getDerivedStateFromError(e)),o=l.__d),null!=l.componentDidCatch&&(l.componentDidCatch(e,r||{}),o=l.__d),o)return l.__E=l}catch(t){e=t}throw e}},c=0,C.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=k({},this.state),"function"==typeof e&&(e=e(k({},n),this.props)),e&&k(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),A(this))},C.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),A(this))},C.prototype.render=S,s=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d=function(e,t){return e.__v.__b-t.__v.__b},T.__r=0,h=/(PointerCapture)$|Capture$/i,f=0,p=R(!1),g=R(!0);var O=0;function U(e,t,n,r,l,i){t||(t={});var o,c,s=t;if("ref"in s)for(c in s={},t)"ref"==c?o=t[c]:s[c]=t[c];var a={type:e,props:s,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--O,__i:-1,__u:0,__source:l,__self:i};if("function"==typeof e&&(o=e.defaultProps))for(c in o)void 0===s[c]&&(s[c]=o[c]);return _.vnode&&_.vnode(a),a}var W,M,I,j,B=0,q=[],J=_,G=J.__b,z=J.__r,V=J.diffed,Y=J.__c,Z=J.unmount,K=J.__;function Q(e,t){J.__h&&J.__h(M,e,B||t),B=0;var n=M.__H||(M.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function X(e){return B=1,function(e,t,n){var r=Q(W++,2);if(r.t=e,!r.__c&&(r.__=[es(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=M,!M.__f)){var l=function(e,t,n){if(!r.__c.__H)return!0;var l=r.__c.__H.__.filter(function(e){return!!e.__c});if(l.every(function(e){return!e.__N}))return!i||i.call(this,e,t,n);var o=r.__c.props!==e;return l.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),i&&i.call(this,e,t,n)||o};M.__f=!0;var i=M.shouldComponentUpdate,o=M.componentWillUpdate;M.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,l(e,t,n),i=r}o&&o.call(this,e,t,n)},M.shouldComponentUpdate=l}return r.__N||r.__}(es,e)}function ee(e,t){var n=Q(W++,3);!J.__s&&ec(n.__H,t)&&(n.__=e,n.u=t,M.__H.__h.push(n))}function et(e){return B=5,en(function(){return{current:e}},[])}function en(e,t){var n=Q(W++,7);return ec(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function er(e,t){return B=8,en(function(){return e},t)}function el(){for(var e;e=q.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(eo),e.__H.__h.forEach(e_),e.__H.__h=[]}catch(t){e.__H.__h=[],J.__e(t,e.__v)}}J.__b=function(e){M=null,G&&G(e)},J.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),K&&K(e,t)},J.__r=function(e){z&&z(e),W=0;var t=(M=e.__c).__H;t&&(I===M?(t.__h=[],M.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(eo),t.__h.forEach(e_),t.__h=[],W=0)),I=M},J.diffed=function(e){V&&V(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==q.push(t)&&j===J.requestAnimationFrame||((j=J.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),ei&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ei&&(t=requestAnimationFrame(n))})(el)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),I=M=null},J.__c=function(e,t){t.some(function(e){try{e.__h.forEach(eo),e.__h=e.__h.filter(function(e){return!e.__||e_(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],J.__e(n,e.__v)}}),Y&&Y(e,t)},J.unmount=function(e){Z&&Z(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{eo(e)}catch(e){t=e}}),n.__H=void 0,t&&J.__e(t,n.__v))};var ei="function"==typeof requestAnimationFrame;function eo(e){var t=M,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),M=t}function e_(e){var t=M;e.__c=e.__(),M=t}function ec(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function es(e,t){return"function"==typeof t?t(e):t}function ea({tabs:e}){let[t,n]=X(e&&e.length>0?e[0].id:"");if(!e||0===e.length)return U("p",{children:"No tabs to display."});ee(()=>{e&&e.length>0?e.some(e=>e.id===t)||n(e[0].id):n("")},[e,t]);let r=e.find(e=>e.id===t)?.content;return U("div",{children:[U("div",{class:"tabs",children:e.map(e=>U("button",{type:"button",class:`tab-button ${e.id===t?"active":""}`,onClick:()=>n(e.id),children:e.name},e.id))}),U("div",{class:"tab-content-area",children:r})]})}function eu(){let[e,t]=X(null),[n,r]=X(null),[l,i]=X(null);return(ee(()=>{fetch("/api/status").then(e=>e.ok?e.json():Promise.reject(Error(`Failed to fetch status: ${e.status} ${e.statusText}`))).then(e=>t(e)).catch(e=>{console.error("Error fetching status:",e),i(t=>t?`${t}
Error fetching status: ${e.message}`:`Error fetching status: ${e.message}`)}),fetch("/api/config").then(e=>e.ok?e.json():Promise.reject(Error(`Failed to fetch config: ${e.status} ${e.statusText}`))).then(e=>r(e)).catch(e=>{console.error("Error fetching current config:",e),i(t=>t?`${t}
Error fetching current config: ${e.message}`:`Error fetching current config: ${e.message}`)})},[]),l)?U("pre",{children:["Error loading data for this tab: ",l]}):U("div",{class:"tab-content-item",children:[U("section",{id:"status-section",children:[U("h2",{children:"Gateway Status"}),e?U("div",{children:[U("ul",{children:[U("li",{children:[U("strong",{children:"Status:"})," ",e.status||"N/A"]}),U("li",{children:[U("strong",{children:"Uptime:"})," ",e.uptime?.toFixed(2)||"N/A","s"]})]}),U("h3",{children:"Backends:"}),e.backends&&e.backends.length>0?U("ul",{children:e.backends.map(e=>U("li",{children:[U("strong",{children:[e.displayName||e.id,":"]}),U("span",{class:e.isReady?"status-ready":"status-not-ready",children:e.isReady?"Ready":"Not Ready"})]},e.id))}):U("p",{children:"No backends configured or status unavailable."})]}):U("p",{children:"Loading status..."})]}),U("section",{id:"current-config-section",children:[U("h2",{children:"Current Effective Configuration"}),n?U("pre",{children:JSON.stringify(n,null,2)}):U("p",{children:"Loading current configuration..."})]})]})}const ed=(e,t)=>U("div",{children:[U("h3",{children:e}),t?U("pre",{children:JSON.stringify(t,null,2)}):U("pre",{children:JSON.stringify({note:"Data not available or not yet set."},null,2)})]});function eh(){let[e,t]=X(null),[n,r]=X(null);return(ee(()=>{fetch("/api/config-details").then(e=>e.ok?e.json():Promise.reject(Error(`Failed to fetch config details: ${e.status} ${e.statusText}`))).then(e=>t(e)).catch(e=>{console.error("Error fetching config details:",e),r(`Error fetching config details: ${e.message}`)})},[]),n)?U("pre",{children:["Error: ",n]}):e?U("div",{class:"tab-content-item",children:U("section",{children:[U("h2",{children:"Configuration States"}),ed("Initial Environment/Default Config (Pre-MCP Handshake):",e.initialEnvConfig),ed("Client-Sent `initializationOptions` (Raw from client):",e.clientSentInitOptions),ed("Final Effective Config (Post-MCP Handshake):",e.finalEffectiveConfig)]})}):U("p",{children:"Loading configuration details..."})}const ef={TRACE:10,DEBUG:20,INFO:30,WARN:40,ERROR:50,FATAL:60};function ep(){let[e,t]=X([]),[n,r]=X("INFO"),[l,i]=X(!0),[o,_]=X(!1),c=et(null),s=et(null),a=er(()=>{s.current&&s.current.readyState<WebSocket.CLOSING&&s.current.close();let e=new WebSocket(`ws://${window.location.host}`);s.current=e,e.onopen=()=>{console.log("Logs WebSocket connected"),_(!0),t(e=>[{timestamp:Date.now(),level:"INFO",message:"Connected to real-time logs...",details:{}},...e.slice(0,199)])},e.onmessage=e=>{try{let r=JSON.parse(e.data);if("log_entry"===r.type){let e=r.payload;t(t=>"all"!==n&&ef[e.level]<ef[n]?t:[e,...t].slice(0,200))}}catch(n){console.error("Error processing log message:",n,e.data),t(t=>[{timestamp:Date.now(),level:"ERROR",message:`Error processing ws message: ${e.data}`,details:{error:n.message}},...t.slice(0,199)])}},e.onclose=()=>{console.log("Logs WebSocket disconnected"),_(!1),t(e=>[{timestamp:Date.now(),level:"WARN",message:"Log WebSocket disconnected. Attempting to reconnect in 5s...",details:{}},...e.slice(0,199)]),setTimeout(a,5e3)},e.onerror=e=>{console.error("Logs WebSocket error:",e),_(!1),t(t=>[{timestamp:Date.now(),level:"ERROR",message:"Log WebSocket connection error.",details:{errorEvent:JSON.stringify(e,Object.getOwnPropertyNames(e))}},...t.slice(0,199)])}},[n]);return ee(()=>(a(),()=>{s.current&&s.current.close()}),[a]),ee(()=>{l&&c.current&&(c.current.scrollTop=c.current.scrollHeight)},[e,l]),U("div",{class:"tab-content-item",id:"logs-section-content",children:[U("h2",{children:"Real-time Logs"}),U("div",{class:"filter-bar",id:"logs-filter",children:[U("label",{for:"log-level-filter",children:"Min Level:"}),U("select",{id:"log-level-filter",value:n,onChange:e=>r(e.target.value),children:[U("option",{value:"all",children:"All"}),U("option",{value:"TRACE",children:"Trace"}),U("option",{value:"DEBUG",children:"Debug"}),U("option",{value:"INFO",children:"Info"}),U("option",{value:"WARN",children:"Warn"}),U("option",{value:"ERROR",children:"Error"}),U("option",{value:"FATAL",children:"Fatal"})]}),U("label",{for:"log-auto-scroll",children:"Auto-scroll:"}),U("input",{type:"checkbox",id:"log-auto-scroll",checked:l,onChange:e=>i(e.target.checked)}),U("span",{children:[" Status: ",o?"Connected":"Disconnected"]})]}),U("div",{id:"logs-content",class:"log-container",ref:c,children:e.map((e,t)=>{var n;return U("div",{class:`log-entry level-${e.level}`,children:[U("span",{class:"timestamp",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour12:!1})}),U("span",{class:"level",children:["[",e.level,"]"]}),U("span",{class:"message",children:null==(n=e.message)?"":n.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),e.details&&Object.keys(e.details).length>0&&U("details",{class:"log-details",children:[U("summary",{children:"Details"}),U("pre",{children:JSON.stringify(e.details,null,2)})]})]},t)}).reverse()})]})}function eg(){return U("div",{class:"tab-content-item",id:"traces-section-content",children:[U("h2",{children:"MCP Traces"}),U("div",{class:"filter-bar",id:"trace-filter",children:[U("label",{for:"trace-auto-scroll",children:"Auto-scroll:"}),U("input",{type:"checkbox",id:"trace-auto-scroll",checked:!0})]}),U("div",{id:"traces-content",class:"log-container",children:U("p",{children:U("i",{children:"Connecting to traces..."})})})]})}function em(){return U("div",{class:"tab-content-item",id:"agents-backends-section-content",children:[U("h2",{children:"Dynamic Agents & Backend Status"}),U("section",{id:"dynamic-agents-list",children:[U("h3",{children:"Dynamically Registered Agents (from AGENTS env var)"}),U("p",{children:U("i",{children:"Agent list will appear here if AGENTS environment variable is set."})})]}),U("section",{id:"backend-tools-status",children:[U("h3",{children:"Configured Backend Tools Status"}),U("p",{children:U("i",{children:"Backend tool statuses will appear here."})})]})]})}function ev(){let[e,t]=X([]),[n,r]=X(""),[l,i]=X(""),[o,_]=X([]),[c,s]=X(!1),[a,u]=X(null);ee(()=>{fetch("/api/config-details").then(e=>e.ok?e.json():Promise.reject(Error(`API error: ${e.status}`))).then(e=>{let n=e?.finalEffectiveConfig||e?.initialEnvConfig;if(n&&n.gptAgents&&Array.isArray(n.gptAgents)){let e=n.gptAgents.map(e=>{let t=e.replace(/[^a-zA-Z0-9_\/]/g,"_").replace(/\//g,"_");return{id:t,displayName:e,methodName:`agentify/agent_${t}`}});t(e),e.length>0&&r(e[0].methodName)}}).catch(e=>{console.error("Error fetching agent list:",e),u("Could not load agent list.")})},[]);let d=er(async()=>{if(!n||!l.trim())return;let e={sender:"user",text:l,timestamp:new Date};_(t=>[...t,e]),s(!0),u(null);try{i("");let e=await fetch("/api/chat-with-agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentMethod:n,params:{query:l,context:null}})});if(!e.ok){let t=await e.json().catch(()=>({message:`HTTP error ${e.status}`}));throw Error(t.message||`Agent call failed with status ${e.status}`)}let t=await e.json(),r={sender:"agent",text:t.message||"No message from agent.",timestamp:new Date,data:t};_(e=>[...e,r])}catch(t){console.error("Error sending agent query:",t),u(t.message||"Failed to get response from agent.");let e={sender:"agent",text:`Error: ${t.message||"Failed to get response"}`,timestamp:new Date};_(t=>[...t,e])}finally{s(!1)}},[n,l]);return U("div",{class:"tab-content-item",id:"chat-section-content",children:[U("h2",{children:"Chat with Agents"}),a&&U("pre",{class:"error-display",children:["Error: ",a]}),U("div",{class:"chat-controls filter-bar",children:[U("label",{for:"agent-select",children:"Select Agent:"}),U("select",{id:"agent-select",value:n,onChange:e=>r(e.target.value),disabled:0===e.length||c,children:[0===e.length&&U("option",{value:"",children:"No agents available (set AGENTS env var)"}),e.map(e=>U("option",{value:e.methodName,children:e.displayName},e.id))]})]}),U("div",{class:"chat-history",children:[o.map((e,t)=>U("div",{class:`chat-message msg-${e.sender}`,children:[U("span",{class:"timestamp",children:e.timestamp.toLocaleTimeString()}),U("strong",{class:"sender",children:["user"===e.sender?"You":"Agent",":"]}),U("p",{class:"text",children:e.text}),e.data&&U("details",{children:[U("summary",{children:"Raw Response Data"}),U("pre",{children:JSON.stringify(e.data,null,2)})]})]},t)),c&&U("div",{class:"chat-message msg-system",children:U("em",{children:"Agent is thinking..."})})]}),U("div",{class:"chat-input-area",children:[U("textarea",{id:"chat-query-input",value:l,onInput:e=>i(e.target.value),placeholder:"Enter your query...",disabled:c||0===e.length}),U("button",{type:"button",onClick:d,disabled:c||!l.trim()||0===e.length||!n,children:"Send"})]})]})}const ey=document.getElementById("app");ey?(e=U(function(){let e=[{id:"status",name:"Status & Config",content:U(eu,{})},{id:"configDetails",name:"Config Details",content:U(eh,{})},{id:"agentsBackends",name:"Agents & Backends",content:U(em,{})},{id:"chat",name:"Chat with Agents",content:U(ev,{})},{id:"logs",name:"Logs",content:U(ep,{})},{id:"traces",name:"Traces",content:U(eg,{})}];return U("div",{class:"app-container",children:[" ",U("header",{children:U("h1",{children:"MCP Agentify - Control Panel"})}),U("main",{children:U(ea,{tabs:e})}),U("footer",{children:U("p",{children:["MCP Agentify Status: ",U("span",{id:"footer-status",children:"UI Loaded"})]})})]})},{}),(t=ey)==document&&(t=document.documentElement),_.__&&_.__(e,t),r=n&&n.__k||t.__k,l=[],i=[],H(t,e=(n||t).__k=function(e,t,n){var r,l,i,_={};for(i in t)"key"==i?r=t[i]:"ref"==i?l=t[i]:_[i]=t[i];if(arguments.length>2&&(_.children=arguments.length>3?o.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)null==_[i]&&(_[i]=e.defaultProps[i]);return w(e,_,r,l,null)}(S,null,[e]),r||m,m,t.namespaceURI,n?[n]:r?null:t.firstChild?o.call(t.childNodes):null,l,n?n:r?r.__e:t.firstChild,!1,i),$(l,e,i)):console.error("Application root element '#app' not found.");
//# sourceMappingURL=frontend.45c7fd51.js.map
